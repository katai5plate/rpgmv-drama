# ツクールMV専用プラグイン H2A-drama
文章の表示で使用する文章を、プラグインとして別ファイルに分けて管理します。

# Download
https://raw.githubusercontent.com/katai5plate/rpgmv-drama/master/src/H2A_drama.js

## Usage
### 基本
1. プラグイン「H2A_drama」をONに設定する
2. そのプラグインの下に、文章専用に作ったプラグインを配置しONにする
3. 文章を表示したいタイミングで、`イベントコマンド:スクリプト` を使い以下のようなスクリプトを入力する
```js
drama.read("book名", page数);
```

### 文章専用プラグインの作成
1. 空の `*.js` ファイルを新規作成
2. 以下の雛形を使用して設定と文章を入力し、保存
```js
drama.chara({
  "ハロルド": ["Actor1", 0],
})

drama.write("book名", [
  [
    `> ハロルド
    これはテストメッセージです。
    ０ページ目です。`,
    `> 
    顔グラフィックなしの場合は
    １行目を「> 」だけにします`,
    `> ハロルド
    次のように長文を作ることもできます
    １
    ２
    ３
    ４
    ５`,
    `> ハロルド
    タグをつけるには\\c[6]こうします\\c[0]。`
  ],
  [
    `> ハロルド
    １ページ目です。`
  ],
  [
    `> ハロルド
    ２ページ目です。`
  ]
])
```

## 古いブラウザでも動くようにしたい場合
コンパイルする必要があります。

### わかる人向け手順
そのまんま `gulp` してやれば `out/` にコンパイルされます

### わからない人向け手順
0. 以下が入っていない場合はインストールする
```yml
- Node.js
- yarn
- gulp
- git
```
1. コマンドプロンプトかターミナルを開き、以下を行う
```bat
cd "任意の作業フォルダの絶対パス"
git clone https://github.com/katai5plate/rpgmv-drama.git
cd rpgmv-drama
yarn install
yarn build
```
2. outフォルダにコンパイルされたプラグインが出力されます
```bat
H2A_drama.safe.js
: 可読性を残してコンパイルしたバージョン
H2A_drama.safe.min.js
: 軽量化と難読化を最優先してコンパイルしたバージョン
```

## 文章専用プラグインを１つのファイルに圧縮したい場合
### わかる人向け手順
```bat
gulp archive
```

### わからない人向け手順
1. 上記 `古いブラウザでも動くようにしたい場合` の `0.` ～ `1.` を行う
2. 続けて以下を行う
```bat
yarn packing
```
3. out/booksフォルダに圧縮されたプラグインが出力されます
```bat
book-shelf.js
: 単純に結合したバージョン
book-shelf.safe.js
: 古いブラウザでも動くように変換したバージョン
book-shelf.safe.min.js
: 軽量化と難読化を最優先して古いブラウザでも動くように圧縮したバージョン
```
